# ─────────────────────────────────────────────────────────────────────────────
# HOME ASSISTANT — configuration.yaml additions
#
# The TfGM Tram Analyzer add-on pushes sensor state directly to Home Assistant
# via the Supervisor API. No command_line sensors or rest_commands are needed.
#
# The only required entries are the input helpers used by the alert automation
# for dedup logic (prevents alerting more than once per tram).
#
# Add these to your existing configuration.yaml and reload HA.
# ─────────────────────────────────────────────────────────────────────────────


# Input helpers — dedup tracking for the tram alert automation
#   tram_last_alerted_minutes: stores minutes_until of the last alerted tram
#   tram_last_alert_sent: stores timestamp of last alert (prevents re-alert within 5 mins)
input_number:
  tram_last_alerted_minutes:
    name: "Tram Last Alerted Minutes"
    min: 0
    max: 99
    step: 1
    initial: 0
    icon: mdi:tram

input_datetime:
  tram_last_alert_sent:
    name: "Tram Last Alert Sent"
    has_date: true
    has_time: true
